(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{60217:function(e,t,r){Promise.resolve().then(r.bind(r,21547)),Promise.resolve().then(r.bind(r,70623)),Promise.resolve().then(r.bind(r,26548)),Promise.resolve().then(r.bind(r,3909)),Promise.resolve().then(r.t.bind(r,30383,23))},16463:function(e,t,r){"use strict";var n=r(71169);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},3909:function(e,t,r){"use strict";r.d(t,{ProtectedRoute:function(){return o}});var n=r(57437),a=r(2265),i=r(16463);let s=()=>{let[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(!0),s=(0,i.useRouter)();return(0,a.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(e)try{let r=await fetch("/api/auth/validate",{headers:{Authorization:"Bearer ".concat(e)}});if(r.ok){let e=await r.json();t(e)}else localStorage.removeItem("token")}catch(e){console.error("Error validando token:",e),localStorage.removeItem("token")}n(!1)})()},[]),{user:e,loading:r,login:async(e,t)=>{},logout:()=>{localStorage.removeItem("token"),t(null),s.push("/login")}}},o=e=>{let{children:t}=e,{user:r,loading:o}=s(),l=(0,i.useRouter)();return((0,a.useEffect)(()=>{o||r||l.push("/login")},[r,o,l]),o)?(0,n.jsx)("div",{children:"Cargando..."}):r?(0,n.jsx)(n.Fragment,{children:t}):null}},21547:function(e,t,r){"use strict";r.d(t,{InvoiceManagement:function(){return o}});var n=r(57437),a=r(2265),i=r(21903),s=r.n(i);let o=()=>{let[e,t]=(0,a.useState)([]);return(0,a.useEffect)(()=>{t([{id:1,customerName:"Juan P\xe9rez",date:"2024-03-15",total:699,status:"Pagada"},{id:2,customerName:"Mar\xeda Garc\xeda",date:"2024-03-16",total:499,status:"Pendiente"}])},[]),(0,n.jsxs)("div",{className:s().invoiceManagement,children:[(0,n.jsx)("h2",{children:"Gesti\xf3n de Facturas"}),(0,n.jsx)("button",{className:s().addButton,children:"Crear Factura"}),(0,n.jsxs)("table",{className:s().invoiceTable,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"ID"}),(0,n.jsx)("th",{children:"Cliente"}),(0,n.jsx)("th",{children:"Fecha"}),(0,n.jsx)("th",{children:"Total"}),(0,n.jsx)("th",{children:"Estado"}),(0,n.jsx)("th",{children:"Acciones"})]})}),(0,n.jsx)("tbody",{children:e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:e.customerName}),(0,n.jsx)("td",{children:e.date}),(0,n.jsxs)("td",{children:["$",e.total]}),(0,n.jsx)("td",{children:e.status}),(0,n.jsxs)("td",{children:[(0,n.jsx)("button",{className:s().viewButton,children:"Ver"}),(0,n.jsx)("button",{className:s().editButton,children:"Editar"})]})]},e.id))})]})]})}},70623:function(e,t,r){"use strict";r.d(t,{ProductManagement:function(){return c}});var n=r(57437),a=r(2265);let i=e=>{let{children:t,...r}=e;return(0,n.jsx)("button",{...r,style:{padding:"10px",margin:"5px",cursor:"pointer"},children:t})},s=e=>{let{label:t,error:r,...a}=e;return(0,n.jsxs)("div",{style:{margin:"10px 0"},children:[(0,n.jsx)("label",{children:t}),(0,n.jsx)("input",{...a,style:{display:"block",width:"100%",padding:"5px"}}),r&&(0,n.jsx)("span",{style:{color:"red"},children:r})]})},o=e=>{let{label:t,options:r,error:a,...i}=e;return(0,n.jsxs)("div",{style:{margin:"10px 0"},children:[(0,n.jsx)("label",{children:t}),(0,n.jsxs)("select",{...i,style:{display:"block",width:"100%",padding:"5px"},children:[(0,n.jsx)("option",{value:"",children:"Seleccione una opci\xf3n"}),r.map(e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value))]}),a&&(0,n.jsx)("span",{style:{color:"red"},children:a})]})},l=e=>{let{isOpen:t,onClose:r,children:a}=e;return t?(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"flex-start",overflowY:"auto",padding:"20px 0"},children:(0,n.jsxs)("div",{style:{background:"white",padding:"20px",borderRadius:"5px",maxWidth:"500px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative"},children:[(0,n.jsx)("button",{onClick:r,style:{position:"absolute",top:"10px",right:"10px",background:"none",border:"none",fontSize:"18px",cursor:"pointer"},children:"X"}),(0,n.jsx)("div",{style:{marginTop:"30px"},children:a})]})}):null},c=()=>{let[e,t]=(0,a.useState)([]),[r,c]=(0,a.useState)([]),[d,h]=(0,a.useState)(!1),[u,p]=(0,a.useState)(!1),[x,j]=(0,a.useState)(null),[m,g]=(0,a.useState)(null),[v,f]=(0,a.useState)({name:"",description:"",price:0,categoryId:0}),[b,y]=(0,a.useState)({name:""});(0,a.useEffect)(()=>{C(),E()},[]),(0,a.useEffect)(()=>{x?f(x):f({name:"",description:"",price:0,categoryId:0})},[x]),(0,a.useEffect)(()=>{m?y(m):y({name:""})},[m]);let C=async()=>{try{let e=await fetch("/api/articles");if(!e.ok)throw Error("Error al cargar los art\xedculos");let r=await e.json();t(r)}catch(e){console.error("Error fetching articles:",e)}},E=async()=>{try{let e=await fetch("/api/categories");if(!e.ok)throw Error("Error al cargar las categor\xedas");let t=await e.json();c(t)}catch(e){console.error("Error fetching categories:",e)}},S=e=>{let{name:t,value:r}=e.target;f(e=>({...e,[t]:t.includes("price")?parseFloat(r)||0:r}))},w=async e=>{e.preventDefault();try{let e={...v,price:parseFloat(v.price.toString()),price4Months:v.price4Months?parseFloat(v.price4Months.toString()):void 0,price8Months:v.price8Months?parseFloat(v.price8Months.toString()):void 0,price12Months:v.price12Months?parseFloat(v.price12Months.toString()):void 0,price16Months:v.price16Months?parseFloat(v.price16Months.toString()):void 0,categoryId:parseInt(v.categoryId.toString(),10)},t="/api/articles",r="POST";if(x&&(t="/api/articles?id=".concat(x.id),r="PATCH",e.id=x.id),!(await fetch(t,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Error al guardar el art\xedculo");h(!1),C()}catch(e){console.error("Error saving article:",e)}},k=async e=>{e.preventDefault();try{let e=m?"/api/categories/".concat(m.id):"/api/categories",t=m?"PUT":"POST";if(!(await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok)throw Error("Error al guardar la categor\xeda");p(!1),E()}catch(e){console.error("Error saving category:",e)}},N=async e=>{try{if(!(await fetch("/api/articles?id=".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).ok)throw Error("Error al eliminar el art\xedculo");C()}catch(e){console.error("Error deleting article:",e)}},M=async e=>{try{if(!(await fetch("/api/categories/".concat(e),{method:"DELETE"})).ok)throw Error("Error al eliminar la categor\xeda");E()}catch(e){console.error("Error deleting category:",e)}},P=async(e,t)=>{var r;let n=null===(r=e.target.files)||void 0===r?void 0:r[0];if(!n)return;let a=new FormData;a.append("file",n);try{let e=await fetch("/api/upload",{method:"POST",body:a});if(!e.ok)throw Error("Failed to upload image");let r=await e.json();f(e=>({...e,[t]:r.url}))}catch(e){console.error("Error uploading image:",e)}};return(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{children:"Gesti\xf3n de Art\xedculos y Categor\xedas"}),(0,n.jsx)(i,{onClick:()=>{j(null),h(!0)},children:"A\xf1adir Art\xedculo"}),(0,n.jsx)(i,{onClick:()=>{g(null),p(!0)},children:"A\xf1adir Categor\xeda"}),(0,n.jsx)("h3",{children:"Art\xedculos"}),(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Nombre"}),(0,n.jsx)("th",{children:"Descripci\xf3n"}),(0,n.jsx)("th",{children:"Precio"}),(0,n.jsx)("th",{children:"Categor\xeda"}),(0,n.jsx)("th",{children:"Acciones"})]})}),(0,n.jsx)("tbody",{children:e.map(e=>{var t;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.name}),(0,n.jsx)("td",{children:e.description}),(0,n.jsx)("td",{children:e.price}),(0,n.jsx)("td",{children:null===(t=r.find(t=>t.id===e.categoryId))||void 0===t?void 0:t.name}),(0,n.jsxs)("td",{children:[(0,n.jsx)(i,{onClick:()=>{j(e),h(!0)},children:"Editar"}),(0,n.jsx)(i,{onClick:()=>N(e.id),children:"Eliminar"})]})]},e.id)})})]}),(0,n.jsx)("h3",{children:"Categor\xedas"}),(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Nombre"}),(0,n.jsx)("th",{children:"Acciones"})]})}),(0,n.jsx)("tbody",{children:r.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.name}),(0,n.jsxs)("td",{children:[(0,n.jsx)(i,{onClick:()=>{g(e),p(!0)},children:"Editar"}),(0,n.jsx)(i,{onClick:()=>M(e.id),children:"Eliminar"})]})]},e.id))})]}),(0,n.jsx)(l,{isOpen:d,onClose:()=>{h(!1),j(null)},children:(0,n.jsxs)("form",{onSubmit:w,children:[(0,n.jsx)(s,{name:"name",value:v.name,onChange:S,label:"Nombre",required:!0}),(0,n.jsx)(s,{name:"description",value:v.description,onChange:S,label:"Descripci\xf3n",required:!0}),(0,n.jsx)(s,{name:"price",type:"number",value:v.price,onChange:S,label:"Precio",required:!0,step:"0.01"}),(0,n.jsx)(o,{name:"categoryId",value:v.categoryId,onChange:S,label:"Categor\xeda",options:r.map(e=>({value:e.id,label:e.name})),required:!0}),(0,n.jsx)(s,{name:"camera",value:v.camera||"",onChange:S,label:"C\xe1mara"}),(0,n.jsx)(s,{name:"ram",value:v.ram||"",onChange:S,label:"RAM"}),(0,n.jsx)(s,{name:"storage",value:v.storage||"",onChange:S,label:"Almacenamiento"}),(0,n.jsx)(s,{name:"processor",value:v.processor||"",onChange:S,label:"Procesador"}),["imageUrl1","imageUrl2","imageUrl3","imageUrl4"].map((e,t)=>(0,n.jsxs)("div",{children:[(0,n.jsx)(s,{name:e,value:v[e]||"",onChange:S,label:"URL de imagen ".concat(t+1)}),(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:t=>P(t,e)})]},e)),(0,n.jsx)(s,{name:"price4Months",type:"number",value:v.price4Months||"",onChange:S,label:"Precio 4 meses",step:"0.01"}),(0,n.jsx)(s,{name:"price8Months",type:"number",value:v.price8Months||"",onChange:S,label:"Precio 8 meses",step:"0.01"}),(0,n.jsx)(s,{name:"price12Months",type:"number",value:v.price12Months||"",onChange:S,label:"Precio 12 meses",step:"0.01"}),(0,n.jsx)(s,{name:"price16Months",type:"number",value:v.price16Months||"",onChange:S,label:"Precio 16 meses",step:"0.01"}),(0,n.jsxs)(i,{type:"submit",children:[x?"Actualizar":"Crear"," Art\xedculo"]})]})}),(0,n.jsx)(l,{isOpen:u,onClose:()=>{p(!1),g(null)},children:(0,n.jsxs)("form",{onSubmit:k,children:[(0,n.jsx)(s,{name:"name",value:b.name,onChange:e=>{let{name:t,value:r}=e.target;y(e=>({...e,[t]:r}))},label:"Nombre de la categor\xeda",required:!0}),(0,n.jsxs)(i,{type:"submit",children:[m?"Actualizar":"Crear"," Categor\xeda"]})]})})]})}},26548:function(e,t,r){"use strict";r.d(t,{TechServiceManagement:function(){return o}});var n=r(57437),a=r(2265),i=r(68341),s=r.n(i);let o=()=>{let[e,t]=(0,a.useState)([]);return(0,a.useEffect)(()=>{t([{id:1,customerName:"Ana L\xf3pez",deviceType:"Smartphone",issue:"Pantalla rota",status:"En progreso",receivedDate:"2024-03-14"},{id:2,customerName:"Carlos Ruiz",deviceType:"Laptop",issue:"No enciende",status:"Pendiente",receivedDate:"2024-03-15"}])},[]),(0,n.jsxs)("div",{className:s().techServiceManagement,children:[(0,n.jsx)("h2",{children:"Gesti\xf3n de Servicios T\xe9cnicos"}),(0,n.jsx)("button",{className:s().addButton,children:"Nuevo Servicio"}),(0,n.jsxs)("table",{className:s().serviceTable,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"ID"}),(0,n.jsx)("th",{children:"Cliente"}),(0,n.jsx)("th",{children:"Dispositivo"}),(0,n.jsx)("th",{children:"Problema"}),(0,n.jsx)("th",{children:"Estado"}),(0,n.jsx)("th",{children:"Fecha de Recepci\xf3n"}),(0,n.jsx)("th",{children:"Acciones"})]})}),(0,n.jsx)("tbody",{children:e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:e.customerName}),(0,n.jsx)("td",{children:e.deviceType}),(0,n.jsx)("td",{children:e.issue}),(0,n.jsx)("td",{children:e.status}),(0,n.jsx)("td",{children:e.receivedDate}),(0,n.jsxs)("td",{children:[(0,n.jsx)("button",{className:s().viewButton,children:"Ver"}),(0,n.jsx)("button",{className:s().updateButton,children:"Actualizar"})]})]},e.id))})]})]})}},30383:function(){},21903:function(){},68341:function(){}},function(e){e.O(0,[663,971,23,744],function(){return e(e.s=60217)}),_N_E=e.O()}]);